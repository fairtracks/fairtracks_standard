{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://raw.githubusercontent.com/fairtracks/fairtracks_standard/master/json/schema/fairtracks_experiment.schema.json",
    "$comment": "JSON signature: ab5451db8fe9a937a1f3f79741cc0f4104a5ea08fe24f34bd3fb4f68ffbfc41f",
    "title": "FAIRification of Genomic Tracks JSON Schema - Experiment",
    "type": "object",
    "properties": {
        "@schema": {
            "description": "The JSON schema absolute URL. Used for link JSON data to a particular version of the JSON schema. Must match the value of 'id' in the linked schema",
            "type": "string",
            "format": "uri",
            "pattern": "^(https?|ftp)://",
            "const": "https://raw.githubusercontent.com/fairtracks/fairtracks_standard/master/json/schema/fairtracks_experiment.schema.json"
        },
        "global_id": {
            "description": "Global experiment identifier, resolvable by identifiers.org",
            "type": "string",
            "format": "curie",
            "namespace": [
                "geo",
                "ega.experiment"
            ],
            "matchType": "canonical",
            "examples": [
                "GEO:GSE35583"
            ]
        },
        "local_id": {
            "description": "Submitter-local identifier (within investigation/hub) for experiment (in CURIE-format, if applicable)",
            "type": "string",
            "examples": [
                "encode:ENCSR000DQP"
            ],
            "unique": true
        },
        "study_ref": {
            "description": "Reference to the study that generated the sample (using the submitter-local identifier of the study)",
            "type": "string",
            "format": "foreign_ref",
            "examples": [
                "UW_ChipSeq"
            ],
            "foreignProperty": "https://raw.githubusercontent.com/fairtracks/fairtracks_standard/master/json/schema/fairtracks_study.schema.json#local_id"
        },
        "sample_ref": {
            "description": "Reference to the sample of the experiment (using the submitter-local identifier of the sample)",
            "type": "string",
            "format": "foreign_ref",
            "examples": [
                "GEO:GSM945229"
            ],
            "foreignProperty": "https://raw.githubusercontent.com/fairtracks/fairtracks_standard/master/json/schema/fairtracks_sample.schema.json#local_id"
        },
        "aggregated_from": {
            "description": "References to external experiments used as basis for aggregated data generation (using global experiment identifiers, resolvable by identifiers.org)",
            "type": "array",
            "items": {
                "type": "string",
                "format": "curie",
                "namespace": "geo",
                "matchType": "canonical",
                "minItems": 1
            }
        },
        "technique": {
            "description": "Main technique used in experiment (e.g., laboratory, computational or statistical technique)",
            "type": "object",
            "properties": {
                "term_url": {
                    "description": "URL linking to an ontology term",
                    "type": "string",
                    "format": "term",
                    "ontology": [
                        "http://purl.obolibrary.org/obo/obi/2018-08-27/obi.owl",
                        "http://edamontology.org/EDAM_1.21.owl"
                    ],
                    "matchType": "exact",
                    "examples": [
                        "http://purl.obolibrary.org/obo/OBI_0000716"
                    ]
                },
                "term_value": {
                    "description": "Exact value according to the ontology used",
                    "type": "string",
                    "examples": [
                        "ChIP-seq assay"
                    ],
                    "autogenerated": true
                }
            },
            "required": [
                "term_url"
            ]
        },
        "target": {
            "description": "Main target of experiment, e.g. antibody/disease/gene/... [Needs more details]",
            "type": "object",
            "properties": {
                "term_url": {
                    "description": "URL linking to an ontology term",
                    "type": "string",
                    "format": "term",
                    "ontology": "https://raw.githubusercontent.com/The-Sequence-Ontology/SO-Ontologies/v3.1/releases/so-xp.owl/so.owl",
                    "matchType": "exact",
                    "examples": [
                        "http://purl.obolibrary.org/obo/SO_0001706"
                    ]
                },
                "term_value": {
                    "description": "Exact value according to the ontology used",
                    "type": "string",
                    "examples": [
                        "H3K4_trimethylation"
                    ],
                    "autogenerated": true
                }
            },
            "required": [
                "term_url"
            ]
        },
        "lab_protocol_description": {
            "description": "Free-text description of lab protocol, or URL to such description",
            "type": "string",
            "examples": [
                "https://www.encodeproject.org/documents/8f459e88-6344-434f-8f9f-6375a9ff1880/@@download/attachment/CD20%2B_Stam_protocol.pdf"
            ]
        },
        "compute_protocol_description": {
            "description": "Free-text description of computational protocol, or URL to such description",
            "type": "string",
            "examples": [
                "https://www.encodeproject.org/documents/6f6351d4-9310-4a3b-a3c2-70ecac47b28b/@@download/attachment/ChIP-seq_Mapping_Pipeline_Overview.pdf"
            ]
        }
    },
    "required": [
        "local_id",
        "study_ref",
        "technique",
        "target"
    ],
    "anyOf": [
        {
            "required": [
                "sample_ref"
            ]
        },
        {
            "required": [
                "aggregated_from"
            ]
        }
    ],
    "additionalProperties": true
}