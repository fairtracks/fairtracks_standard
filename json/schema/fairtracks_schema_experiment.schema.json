{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://raw.githubusercontent.com/fairtracks/fairtracks_standard/master/json/schema/fairtracks_experiment.schema.json",
    "title": "FAIRification of Genomic Tracks JSON Schema - Experiment",
    "type": "object",
    "properties": {
        "@schema": {
            "description": "The JSON schema absolute IRI. Used for link JSON data to a particular version of the JSON schema. Must match the value of 'id' in the linked schema",
            "type": "string",
            "format": "iri"
        },
        "global_id": {
            "description": "Global experiment identifier, resolvable by identifiers.org",
            "type": "string",
            "format": "curie",
            "namespace": "?",
            "matchType": "canonical"
        },
        "local_id": {
            "description": "Submitter-local identifier (within investigation/hub) for experiment (in curie-format, if applicable)",
            "unique": true,
            "type": "string"
        },
        "study_ref": {
            "description": "Reference to the study that generated the sample (using the submitter-local identifier of the study)",
            "type": "string",
            "format": "foreign_ref",
            "foreignProperty": "https://raw.githubusercontent.com/fairtracks/fairtracks_standard/master/json/schema/fairtracks_study.schema.json#local_id"
        },
        "sample_ref": {
            "description": "Reference to the sample of the experiment (using the submitter-local identifier of the sample)",
            "type": "string",
            "format": "foreign_ref",
            "foreignProperty": "https://raw.githubusercontent.com/fairtracks/fairtracks_standard/master/json/schema/fairtracks_sample.schema.json#local_id"
        },
        "aggregated_from": {
            "description": "References to external data sources used as basis for aggregated data generation",
            "type": "array",
            "items": {
                "description": "Reference to external experiment (using global experiment dientifier, resolvable by identifiers.org)",
                "type": "string",
                "format": "curie",
                "namespace": "?",
                "matchType": "canonical"
            }
        },
        "tech_type": {
            "type": "object",
            "properties": {
                "term_iri": {
                    "description": "Type of technology (IRI linking to an ontology term)",
                    "type": "string",
                    "format": "term",
                    "ontology": "http://purl.obolibrary.org/obo/obi/2018-08-27/obi.owl",
                    "matchType": "exact"
                },
                "term_value": {
                    "description": "Type of experiment (exact value according to the ontology used)",
                    "autogenerated": true,
                    "type": "string"
                }
            },
            "required": [
                "term_iri"
            ]
        },
        "target": {
            "description": "Main target of experiment, e.g. antibody/disease/gene/... [Needs more details]",
            "type": "object",
            "properties": {
                "term_iri": {
                    "description": "IRI linking to an ontology term",
                    "type": "string",
                    "format": "term",
                    "ontology": [
                        "https://raw.githubusercontent.com/The-Sequence-Ontology/SO-Ontologies/v3.1/releases/so-xp.owl/so.owl",
                        "?"
                    ],
                    "matchType": "exact"
                },
                "term_value": {
                    "description": "Exact value according to the ontology used",
                    "autogenerated": true,
                    "type": "string"
                }
            },
            "required": [
                "term_iri"
            ]
        },
        "lab_protocol_description": {
            "description": "Free-text description of lab protocol, or IRI to such description",
            "type": "string"
        },
        "compute_protocol_description": {
            "description": "Free-text description of computational protocol, or IRI to such description",
            "type": "string"
        }
    },
    "required": [
        "@schema",
        "global_id",
        "local_id",
        "study_ref",
        "tech_type",
        "target"
    ],
    "anyOf": [
        {
            "required": [
                "sample_ref"
            ]
        },
        {
            "required": [
                "aggregated_from"
            ]
        }
    ],
    "additionalProperties": true
}