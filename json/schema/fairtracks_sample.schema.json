{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://raw.githubusercontent.com/fairtracks/fairtracks_standard/master/json/schema/fairtracks_sample.schema.json",
    "$comment": "JSON signature: c33a6f7bc9971d8711966828edf607f06e4c780ae7131aa929933dcac6a59ee1",
    "title": "Sample",
    "type": "object",
    "properties": {
        "@schema": {
            "description": "The JSON Schema absolute URL. Used to link JSON data to a JSON schema. Must match the value of '$id' in the linked schema",
            "type": "string",
            "format": "uri",
            "pattern": "^(https?|ftp)://",
            "const": "https://raw.githubusercontent.com/fairtracks/fairtracks_standard/master/json/schema/fairtracks_sample.schema.json"
        },
        "global_id": {
            "description": "Global sample identifier, resolvable by identifiers.org",
            "type": "string",
            "format": "curie",
            "namespace": "biosample",
            "matchType": "canonical",
            "examples": [
                "biosample:SAMN01731491"
            ]
        },
        "local_id": {
            "description": "Submitter-local identifier (within investigation/hub) for sample (in CURIE-format, if applicable)",
            "type": "string",
            "examples": [
                "geo:GSM945229"
            ],
            "unique": true
        },
        "species_id": {
            "description": "Species identifier, resolvable by identifiers.org",
            "type": "string",
            "format": "curie",
            "namespace": "taxonomy",
            "matchType": "canonical",
            "examples": [
                "taxonomy:9606"
            ]
        },
        "species_name": {
            "description": "Species name according to the NCBI Taxonomy database (https://www.ncbi.nlm.nih.gov/taxonomy)",
            "type": "string",
            "examples": [
                "Homo sapiens"
            ],
            "autogenerated": true
        },
        "biospecimen_class": {
            "description": "Main type of structural unit to be used for classification of the sample",
            "type": "object",
            "properties": {
                "term_id": {
                    "description": "URL linking to an ontology term",
                    "type": "string",
                    "format": "term",
                    "pattern": "^(https?|ftp)://",
                    "enum": [
                        "http://purl.obolibrary.org/obo/NCIT_C12508",
                        "http://purl.obolibrary.org/obo/NCIT_C12913",
                        "http://purl.obolibrary.org/obo/NCIT_C16403",
                        "http://purl.obolibrary.org/obo/NCIT_C103199"
                    ],
                    "ontology": "http://purl.obolibrary.org/obo/ncit/releases/2019-09-09/ncit.owl",
                    "matchType": "exact",
                    "examples": [
                        "http://purl.obolibrary.org/obo/NCIT_C16403"
                    ]
                },
                "term_label": {
                    "description": "Exact value according to the ontology used",
                    "type": "string",
                    "enum": [
                        "Cell",
                        "Abnormal Cell",
                        "Cell Line",
                        "Organism Part"
                    ],
                    "examples": [
                        "Cell Line"
                    ],
                    "autogenerated": true
                }
            },
            "required": [
                "term_id"
            ]
        },
        "sample_type": {
            "description": "The type of the sample",
            "type": "object",
            "properties": {
                "cell_type": {
                    "description": "Cell type of isolated normal cells in the sample. This property should only be used if biospecimen_class is set to \"Cell\".",
                    "type": "object",
                    "properties": {
                        "term_id": {
                            "description": "URL linking to an ontology term",
                            "type": "string",
                            "format": "term",
                            "pattern": "^(https?|ftp)://",
                            "ontology": "https://github.com/EBISPOT/efo/releases/download/v3.5.1/efo.owl",
                            "ancestors": "http://www.ebi.ac.uk/efo/EFO_0000324",
                            "matchType": "exact"
                        },
                        "term_label": {
                            "description": "Exact value according to the ontology used",
                            "type": "string",
                            "autogenerated": true
                        }
                    },
                    "required": [
                        "term_id"
                    ]
                },
                "abnormal_cell_type": {
                    "description": "Cell type of isolated abnormal cells in the sample. This property should only be used if biospecimen_class is set to \"Abnormal Cell\".",
                    "type": "object",
                    "properties": {
                        "term_id": {
                            "description": "URL linking to an ontology term",
                            "type": "string",
                            "format": "term",
                            "pattern": "^(https?|ftp)://",
                            "ontology": "http://purl.obolibrary.org/obo/ncit/releases/2019-09-09/ncit.owl",
                            "ancestors": "http://purl.obolibrary.org/obo/NCIT_C12801",
                            "matchType": "exact"
                        },
                        "term_label": {
                            "description": "Exact value according to the ontology used",
                            "type": "string",
                            "autogenerated": true
                        }
                    },
                    "required": [
                        "term_id"
                    ]
                },
                "cell_line": {
                    "description": "Cultured cell line used in the sample. This property should only be used if biospecimen_class is set to \"Cell Line\".",
                    "type": "object",
                    "properties": {
                        "term_id": {
                            "description": "URL linking to an ontology term",
                            "type": "string",
                            "format": "term",
                            "pattern": "^(https?|ftp)://",
                            "ontology": "https://github.com/EBISPOT/efo/releases/download/v3.5.1/efo.owl",
                            "ancestors": "http://purl.obolibrary.org/obo/CL_0000010",
                            "matchType": "exact",
                            "examples": [
                                "http://purl.obolibrary.org/obo/CL_0000236"
                            ]
                        },
                        "term_label": {
                            "description": "Exact value according to the ontology used",
                            "type": "string",
                            "examples": [
                                "H1-hESC"
                            ],
                            "autogenerated": true
                        }
                    },
                    "required": [
                        "term_id"
                    ]
                },
                "organism_part": {
                    "description": "Part of organism (typically tissue or organ) from which the sample was taken, or cell line was derived from. This property  must be used is biospecimen_class is set to \"Organism Part\", but can also be used for the other values of biospecimen_class.",
                    "type": "object",
                    "properties": {
                        "term_id": {
                            "description": "URL linking to an ontology term",
                            "type": "string",
                            "format": "term",
                            "pattern": "^(https?|ftp)://",
                            "ontology": "https://github.com/EBISPOT/efo/releases/download/v3.5.1/efo.owl",
                            "ancestors": "http://www.ebi.ac.uk/efo/EFO_0000635",
                            "matchType": "exact",
                            "examples": [
                                "http://purl.obolibrary.org/obo/CL_0002322"
                            ]
                        },
                        "term_label": {
                            "description": "Exact value according to the ontology used",
                            "type": "string",
                            "examples": [
                                "embryonic stem cell"
                            ],
                            "autogenerated": true
                        }
                    },
                    "required": [
                        "term_id"
                    ]
                },
                "summary": {
                    "description": "Summary of 'sample_type', copied from 'cell_type', 'abnormal_cell_type', 'cell_line', or 'organism_part', according to 'biospecimen_class'",
                    "type": "string",
                    "examples": [
                        "H1-hESC"
                    ],
                    "autogenerated": true
                }
            }
        },
        "phenotype": {
            "description": "Main phenotype (e.g. disease) connected to the sample",
            "type": "object",
            "$ref": "https://raw.githubusercontent.com/fairtracks/fairtracks_standard/master/json/schema/fairtracks_phenotype.schema.json"
        }
    },
    "required": [
        "local_id",
        "species_id",
        "biospecimen_class",
        "sample_type",
        "phenotype"
    ],
    "allOf": [
        {
            "if": {
                "properties": {
                    "biospecimen_class": {
                        "properties": {
                            "term_id": {
                                "const": "http://purl.obolibrary.org/obo/NCIT_C12508"
                            }
                        }
                    }
                }
            },
            "then": {
                "properties": {
                    "sample_type": {
                        "required": [
                            "cell_type"
                        ]
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "biospecimen_class": {
                        "properties": {
                            "term_id": {
                                "const": "http://purl.obolibrary.org/obo/NCIT_C12913"
                            }
                        }
                    }
                }
            },
            "then": {
                "properties": {
                    "sample_type": {
                        "required": [
                            "abnormal_cell_type"
                        ]
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "biospecimen_class": {
                        "properties": {
                            "term_id": {
                                "const": "http://purl.obolibrary.org/obo/NCIT_C16403"
                            }
                        }
                    }
                }
            },
            "then": {
                "properties": {
                    "sample_type": {
                        "required": [
                            "cell_line"
                        ]
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "biospecimen_class": {
                        "properties": {
                            "term_id": {
                                "const": "http://purl.obolibrary.org/obo/NCIT_C103199"
                            }
                        }
                    }
                }
            },
            "then": {
                "properties": {
                    "sample_type": {
                        "required": [
                            "organism_part"
                        ]
                    }
                }
            }
        }
    ],
    "additionalProperties": true
}
